{# Blog list template #}

{% extends "blog-base.html" %}

{% block blog_content %}

    <!-- blog list -->
    {% if page.subpages %}
        <div id='blog-list'>
            {% for page in page.subpages|sort(attribute='datetime', reverse=True) %}
                <div class='blog-item {% if loop.last %}last{% endif %}'>
                    <div class='{% for tag in page.tags %}{{nospace(tag)}} {% endfor %}'>
                        <table>
                            <tr>
                                <td class='title-img'>
                                    {% if page.title_img_thumb %}
                                        <a href='{{page.url}}'>
                                            <img src='{{page.title_img_thumb}}'>
                                        </a>
                                    {% endif %}
                                </td>

                                <td class='text'>
                                    <div class='title-bar'>
                                        <h1 class='title'>
                                            <a href='{{page.url}}'>
                                                {{page.title}}
                                            </a>
                                        </h1>

                                        <div class='subtitle'>
                                            {{page.date}}

                                            {% if page.tags %}
                                                | in
                                                {% for tag in page.tags %}
                                                    {% if loop.length == 1 %}
                                                        {{tag_link(tag)}}
                                                    {% elif not loop.last %}
                                                        {{tag_link(tag)}},
                                                    {% else %}
                                                        and {{tag_link(tag)}}
                                                    {% endif %}
                                                {% endfor %}
                                            {% endif %}
                                        </div>

                                        <div class='snippet'>
                                            {{ lipsum(1, html=false)|truncate(200) }}
                                        </div>
                                    </div>

                                    <div class='snippet'>
                                        {{page.original|truncate}}
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            {% endfor %}
        </div>
        
    {% else %}
        <p> No blog entries to display :-(</p>
    {% endif %}
{% endblock %}
